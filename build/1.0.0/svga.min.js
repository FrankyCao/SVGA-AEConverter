var Matrix=function(){function t(){return this.props[0]=1,this.props[1]=0,this.props[2]=0,this.props[3]=0,this.props[4]=0,this.props[5]=1,this.props[6]=0,this.props[7]=0,this.props[8]=0,this.props[9]=0,this.props[10]=1,this.props[11]=0,this.props[12]=0,this.props[13]=0,this.props[14]=0,this.props[15]=1,this}function s(t){if(0===t)return this;var s=Math.cos(t),r=Math.sin(t);return this._t(s,-r,0,0,r,s,0,0,0,0,1,0,0,0,0,1)}function r(t){if(0===t)return this;var s=Math.cos(t),r=Math.sin(t);return this._t(1,0,0,0,0,s,-r,0,0,r,s,0,0,0,0,1)}function p(t){if(0===t)return this;var s=Math.cos(t),r=Math.sin(t);return this._t(s,0,r,0,0,1,0,0,-r,0,s,0,0,0,0,1)}function o(t){if(0===t)return this;var s=Math.cos(t),r=Math.sin(t);return this._t(s,-r,0,0,r,s,0,0,0,0,1,0,0,0,0,1)}function i(t,s){return this._t(1,s,t,1,0,0)}function e(t,s){return this.shear(Math.tan(t),Math.tan(s))}function h(t,s){var r=Math.cos(s),p=Math.sin(s);return this._t(r,p,0,0,-p,r,0,0,0,0,1,0,0,0,0,1)._t(1,0,0,0,Math.tan(t),1,0,0,0,0,1,0,0,0,0,1)._t(r,-p,0,0,p,r,0,0,0,0,1,0,0,0,0,1)}function n(t,s,r){return r=isNaN(r)?1:r,1==t&&1==s&&1==r?this:this._t(t,0,0,0,0,s,0,0,0,0,r,0,0,0,0,1)}function a(t,s,r,p,o,i,e,h,n,a,u,c,f,l,m,v){return this.props[0]=t,this.props[1]=s,this.props[2]=r,this.props[3]=p,this.props[4]=o,this.props[5]=i,this.props[6]=e,this.props[7]=h,this.props[8]=n,this.props[9]=a,this.props[10]=u,this.props[11]=c,this.props[12]=f,this.props[13]=l,this.props[14]=m,this.props[15]=v,this}function u(t,s,r){return r=isNaN(r)?0:r,0!==t||0!==s||0!==r?this._t(1,0,0,0,0,1,0,0,0,0,1,0,t,s,r,1):this}function c(t,s,r,p,o,i,e,h,n,a,u,c,f,l,m,v){if(1===t&&0===s&&0===r&&0===p&&0===o&&1===i&&0===e&&0===h&&0===n&&0===a&&1===u&&0===c)return 0===f&&0===l&&0===m||(this.props[12]=this.props[12]*t+this.props[13]*o+this.props[14]*n+this.props[15]*f,this.props[13]=this.props[12]*s+this.props[13]*i+this.props[14]*a+this.props[15]*l,this.props[14]=this.props[12]*r+this.props[13]*e+this.props[14]*u+this.props[15]*m,this.props[15]=this.props[12]*p+this.props[13]*h+this.props[14]*c+this.props[15]*v),this;var y=this.props[0],g=this.props[1],d=this.props[2],j=this.props[3],x=this.props[4],S=this.props[5],T=this.props[6],w=this.props[7],_=this.props[8],b=this.props[9],O=this.props[10],M=this.props[11],N=this.props[12],D=this.props[13],A=this.props[14],P=this.props[15];return this.props[0]=y*t+g*o+d*n+j*f,this.props[1]=y*s+g*i+d*a+j*l,this.props[2]=y*r+g*e+d*u+j*m,this.props[3]=y*p+g*h+d*c+j*v,this.props[4]=x*t+S*o+T*n+w*f,this.props[5]=x*s+S*i+T*a+w*l,this.props[6]=x*r+S*e+T*u+w*m,this.props[7]=x*p+S*h+T*c+w*v,this.props[8]=_*t+b*o+O*n+M*f,this.props[9]=_*s+b*i+O*a+M*l,this.props[10]=_*r+b*e+O*u+M*m,this.props[11]=_*p+b*h+O*c+M*v,this.props[12]=N*t+D*o+A*n+P*f,this.props[13]=N*s+D*i+A*a+P*l,this.props[14]=N*r+D*e+A*u+P*m,this.props[15]=N*p+D*h+A*c+P*v,this}function f(t){var s;for(s=0;s<16;s+=1)t.props[s]=this.props[s]}function l(t){var s;for(s=0;s<16;s+=1)this.props[s]=t[s]}function m(t,s,r){return{x:t*this.props[0]+s*this.props[4]+r*this.props[8]+this.props[12],y:t*this.props[1]+s*this.props[5]+r*this.props[9]+this.props[13],z:t*this.props[2]+s*this.props[6]+r*this.props[10]+this.props[14]}}function v(t,s,r){return t*this.props[0]+s*this.props[4]+r*this.props[8]+this.props[12]}function y(t,s,r){return t*this.props[1]+s*this.props[5]+r*this.props[9]+this.props[13]}function g(t,s,r){return t*this.props[2]+s*this.props[6]+r*this.props[10]+this.props[14]}function d(t,s,r){return[t*this.props[0]+s*this.props[4]+r*this.props[8]+this.props[12],t*this.props[1]+s*this.props[5]+r*this.props[9]+this.props[13],t*this.props[2]+s*this.props[6]+r*this.props[10]+this.props[14]]}function j(t,s){return bm_rnd(t*this.props[0]+s*this.props[4]+this.props[12])+","+bm_rnd(t*this.props[1]+s*this.props[5]+this.props[13])}function x(){return[this.props[0],this.props[1],this.props[2],this.props[3],this.props[4],this.props[5],this.props[6],this.props[7],this.props[8],this.props[9],this.props[10],this.props[11],this.props[12],this.props[13],this.props[14],this.props[15]]}function S(){return isSafari?"matrix3d("+roundTo2Decimals(this.props[0])+","+roundTo2Decimals(this.props[1])+","+roundTo2Decimals(this.props[2])+","+roundTo2Decimals(this.props[3])+","+roundTo2Decimals(this.props[4])+","+roundTo2Decimals(this.props[5])+","+roundTo2Decimals(this.props[6])+","+roundTo2Decimals(this.props[7])+","+roundTo2Decimals(this.props[8])+","+roundTo2Decimals(this.props[9])+","+roundTo2Decimals(this.props[10])+","+roundTo2Decimals(this.props[11])+","+roundTo2Decimals(this.props[12])+","+roundTo2Decimals(this.props[13])+","+roundTo2Decimals(this.props[14])+","+roundTo2Decimals(this.props[15])+")":(this.cssParts[1]=this.props.join(","),this.cssParts.join(""))}function T(){return"matrix("+this.props[0]+","+this.props[1]+","+this.props[4]+","+this.props[5]+","+this.props[12]+","+this.props[13]+")"}function w(){return""+this.toArray()}return function(){this.reset=t,this.rotate=s,this.rotateX=r,this.rotateY=p,this.rotateZ=o,this.skew=e,this.skewFromAxis=h,this.shear=i,this.scale=n,this.setTransform=a,this.translate=u,this.transform=c,this.applyToPoint=m,this.applyToX=v,this.applyToY=y,this.applyToZ=g,this.applyToPointArray=d,this.applyToPointStringified=j,this.toArray=x,this.toCSS=S,this.to2dCSS=T,this.toString=w,this.clone=f,this.cloneFromProps=l,this._t=this.transform,this.props=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],this.cssParts=["matrix3d(","",")"]}}();"object"!=typeof JSON&&(JSON={}),function(){"use strict";function f(t){return t<10?"0"+t:t}function this_value(){return this.valueOf()}function quote(t){return rx_escapable.lastIndex=0,rx_escapable.test(t)?'"'+t.replace(rx_escapable,function(t){var s=meta[t];return"string"==typeof s?s:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}function str(t,s){var r,p,o,i,e,h=gap,n=s[t];switch(n&&"object"==typeof n&&"function"==typeof n.toJSON&&(n=n.toJSON(t)),"function"==typeof rep&&(n=rep.call(s,t,n)),typeof n){case"string":return quote(n);case"number":return isFinite(n)?String(n):"null";case"boolean":case"null":return String(n);case"object":if(!n)return"null";if(gap+=indent,e=[],"[object Array]"===Object.prototype.toString.apply(n)){for(i=n.length,r=0;r<i;r+=1)e[r]=str(r,n)||"null";return o=0===e.length?"[]":gap?"[\n"+gap+e.join(",\n"+gap)+"\n"+h+"]":"["+e.join(",")+"]",gap=h,o}if(rep&&"object"==typeof rep)for(i=rep.length,r=0;r<i;r+=1)"string"==typeof rep[r]&&(p=rep[r],o=str(p,n),o&&e.push(quote(p)+(gap?": ":":")+o));else for(p in n)Object.prototype.hasOwnProperty.call(n,p)&&(o=str(p,n),o&&e.push(quote(p)+(gap?": ":":")+o));return o=0===e.length?"{}":gap?"{\n"+gap+e.join(",\n"+gap)+"\n"+h+"}":"{"+e.join(",")+"}",gap=h,o}}var rx_one=/^[\],:{}\s]*$/,rx_two=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,rx_three=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,rx_four=/(?:^|:|,)(?:\s*\[)+/g,rx_escapable=/[\\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,rx_dangerous=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},Boolean.prototype.toJSON=this_value,Number.prototype.toJSON=this_value,String.prototype.toJSON=this_value);var gap,indent,meta,rep;"function"!=typeof JSON.stringify&&(meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},JSON.stringify=function(t,s,r){var p;if(gap="",indent="","number"==typeof r)for(p=0;p<r;p+=1)indent+=" ";else"string"==typeof r&&(indent=r);if(rep=s,s&&"function"!=typeof s&&("object"!=typeof s||"number"!=typeof s.length))throw new Error("JSON.stringify");return str("",{"":t})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(t,s){var r,p,o=t[s];if(o&&"object"==typeof o)for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(p=walk(o,r),void 0!==p?o[r]=p:delete o[r]);return reviver.call(t,s,o)}var j;if(text=String(text),rx_dangerous.lastIndex=0,rx_dangerous.test(text)&&(text=text.replace(rx_dangerous,function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})),rx_one.test(text.replace(rx_two,"@").replace(rx_three,"]").replace(rx_four,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}();var SVGA;!function(t){var s=function(){function t(t){this.app=void 0,this.proj=void 0,this.res=[],this.layers=[],this.app=t,this.loadProj(),this.loadRes(t.project.activeItem.layers,t.project.activeItem.layers.length),this.loadLayer(t.project.activeItem.layers,t.project.activeItem.layers.length)}return t.prototype.loadProj=function(){this.proj={name:this.app.project.activeItem.name,width:this.app.project.activeItem.width,height:this.app.project.activeItem.height,frameRate:this.app.project.activeItem.frameRate,frameCount:this.app.project.activeItem.frameRate*this.app.project.activeItem.duration}},t.prototype.loadRes=function(t,s){for(var r=1;r<=t.length;r++){var p=t[r];p.source&&p.source.file?this.res.push({name:p.source.name,path:p.source.file.fsName}):p.source.numLayers>0&&this.loadRes(p.source.layers,p.source.numLayers)}},t.prototype.loadLayer=function(t,s){for(var r=1;r<=s;r++){var p=t[r];p.source&&p.source.file?this.layers.push({name:p.source.name,values:{alpha:this.requestValue(p.transform.opacity),matrix:this.requestMatrix(p.transform,p.width,p.height)}}):p.source.numLayers>0&&this.loadLayer(p.source.layers,p.source.numLayers)}},t.prototype.requestValue=function(t){for(var s=[],r=1/this.proj.frameRate,p=0;p<r*this.proj.frameCount;p+=r)s.push(t.valueAtTime(p,!0));return s},t.prototype.requestMatrix=function(t,s,r){for(var p=[],o=1/this.proj.frameRate,i=0;i<o*this.proj.frameCount;i+=o){var e=t.Rotation.valueAtTime(i,!0),h=t.Scale.valueAtTime(i,!0)[0]/100,n=t.Scale.valueAtTime(i,!0)[1]/100,a=t.Position.valueAtTime(i,!0)[0],u=t.Position.valueAtTime(i,!0)[1],c=new Matrix;c.reset().rotate(e).scale(h,n),this.convertMatrix(c,a,u,0,0,s,r),p.push({a:c.props[0],b:c.props[1],c:c.props[4],d:c.props[5],tx:c.props[12],ty:c.props[13]})}return p},t.prototype.convertMatrix=function(t,s,r,p,o,i,e){var h=t.props[0],n=t.props[1],a=t.props[4],u=t.props[5],c=t.props[12],f=t.props[13],l=h*p+a*o+c,m=h*(p+i)+a*o+c,v=h*p+a*(o+e)+c,y=h*(p+i)+a*(o+e)+c,g=n*p+u*o+f,d=n*(p+i)+u*o+f,j=n*p+u*(o+e)+f,x=n*(p+i)+u*(o+e)+f,S=Math.min(v,y,l,m),T=Math.min(j,x,g,d);t.translate(s-S/2,r-T/2)},t}();t.Converter=s;var r=function(){function t(t){this.outPath=app.project.file.path+"/svga_works",this.converter=t}return t.prototype.write=function(){this.createOutputDirectories(),this.copyImages(),this.writeSpec()},t.prototype.createOutputDirectories=function(){new Folder(this.outPath).create()},t.prototype.copyImages=function(){for(var t=File,s=0;s<this.converter.res.length;s++){var r=this.converter.res[s];new t(r.path).copy(new t(this.outPath+"/"+r.name))}},t.prototype.writeSpec=function(){var t=File,s={ver:"1.0.1",movie:{viewBox:{width:this.converter.proj.width,height:this.converter.proj.height},fps:this.converter.proj.frameRate,frames:this.converter.proj.frameCount*this.converter.proj.frameRate},images:{},sprites:{}},r=new t(this.outPath+"/movie.spec");r.exists&&r.remove(),r.encoding="UTF-8",r.open("e","TEXT","????"),r.write(JSON.stringify(s)),r.close()},t}();t.Writer=r}(SVGA||(SVGA={}));var converter=new SVGA.Converter(app),writer=new SVGA.Writer(converter);writer.write();